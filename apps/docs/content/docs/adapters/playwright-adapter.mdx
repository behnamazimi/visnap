---
title: Playwright Adapter
description: Configure browser automation for capturing screenshots
---

Use the [Playwright](https://playwright.dev/) adapter to launch Chromium, Firefox, or WebKit and capture screenshots.

## Basic Configuration

```typescript
adapters: {
  browser: {
    name: "@visnap/playwright-adapter",
    options: {
      launch: { browser: 'chromium', headless: true },
      context: {
        colorScheme: 'light',
        reducedMotion: 'reduce'
      }
    }
  }
}
```

## Browser Options

### Single Browser

Test with one browser:

```typescript
options: { browser: 'chromium' } // or 'firefox', 'webkit'
```

### Multiple Browsers

Test across all browsers:

```typescript
options: { browser: ["chromium", "firefox", "webkit"] }
```

Or configure each browser with custom options:

```typescript
options: { 
  browser: [
    { name: "chromium", options: { headless: false } },
    { name: "firefox", options: { headless: true } },
    { name: "webkit", options: { headless: true } }
  ]
}
```

### Browser-Specific Settings

Configure each browser differently:

```typescript
// Configure per-run by changing launch options
options: {
  browser: [
    {
      name: "chromium",
      options: {
        // ... launch/context/navigation ...
      }
    }
  ]
}
```

## Launch Configuration

Control how browsers start:

```typescript
launch: {
  browser: 'chromium',
  channel: 'chrome',     // use Chrome instead of Chromium
  headless: true,
  args: ['--no-sandbox'] // additional browser arguments
}
```

## Context Configuration

Set browser context options:

```typescript
context: {
  colorScheme: 'light',      // or 'dark'
  reducedMotion: 'reduce',   // or 'no-preference'
  storageStatePath: './auth.json', // saved login state
  locale: 'en-US',          // browser locale
  timezoneId: 'America/New_York'
}
```

## Navigation Settings

Control page loading behavior:

```typescript
navigation: {
  baseUrl: 'http://localhost:3000', // base URL for relative paths
  waitUntil: 'load',                // when to consider page loaded
  timeoutMs: 30000                  // navigation timeout
}
```

## CSS Injection

Disable animations and hide elements for stable screenshots:

```typescript
injectCSS: `
  * {
    animation: none !important;
    transition: none !important;
  }
  .loader { display: none !important; }
  .cookie-banner { display: none !important; }
`
```

## Performance Tips

### Headless Mode

Headless mode offers faster execution and is suitable for most testing scenarios. Use headed mode when you need to visually debug interactions:

```typescript
launch: { headless: true } // Faster execution
// or
launch: { headless: false } // For debugging
```

### Memory Issues

For large test suites, you might want to reduce concurrency to avoid memory issues:

```typescript
runtime: {
  maxConcurrency: 2 // Lower concurrency uses less memory
}
```

### Adapter Performance Options

You can tune Playwright-specific performance behavior from the adapter options. These are adapter-only and do not affect other adapters.

```typescript
adapters: {
  browser: {
    name: "@visnap/playwright-adapter",
    options: {
      // ... launch/context/navigation ...
      performance: {
        // Block heavy/irrelevant resources via routing (substrings/hostnames/extensions)
        blockResources: [".map", ".mp4", "fonts.gstatic.com", "/analytics"],
        // Reuse a single BrowserContext across captures (storage cleared between runs)
        reuseContext: true,
        // Disable animations via emulateMedia + CSS for more stable screenshots
        disableAnimations: true,
      }
    }
  }
}
```

Note: The capture code uses `page.locator(selector).screenshot()` when available for stability; otherwise it falls back to the element handle's `screenshot()`.

Note:
- Device scale factor should be set on the viewport (e.g. `{ width, height, deviceScaleFactor }`) rather than adapter performance.
- You can also inject your own CSS (see above) to hide dynamic elements.
