---
title: URL Adapter
description: Test any URL with ViSnap without requiring Storybook
---

The URL adapter lets you test any web page or application. Perfect for testing marketing sites, landing pages, or applications that don't use Storybook.

## Configuration

```ts
// visnap.config.ts|js
testCase: [
  {
    name: "@visnap/url-adapter",
    options: {
      urls: [
        { id: "homepage", url: "http://localhost:3000/" },
        { id: "about", url: "http://localhost:3000/about" },
        { id: "pricing", url: "http://localhost:3000/pricing" },
      ],
      // include: ["*"], // minimatch patterns
      // exclude: ["*admin*"]
    },
  },
];
```

<ApiTable
  title="URL Adapter Options"
  caption="Options are provided under adapters.testCase[i].options."
  rows={ApiTable.defineRows([
    {
      name: "urls",
      type: "Array<UrlConfig>",
      description: "Array of URLs to test (at least one required).",
      href: "#url-configuration",
    },
    {
      name: "include",
      type: "string | string[]",
      description: "Minimatch patterns to include specific URLs by id.",
      href: "#pattern-filtering",
    },
    {
      name: "exclude",
      type: "string | string[]",
      description: "Minimatch patterns to exclude URLs by id.",
      href: "#pattern-filtering",
    },
  ])}
  anchorPrefix="url-adapter"
/>

## URL Configuration

Each URL requires an id and url. Optional fields allow per-URL overrides and interactions.

<ApiTable
  title="UrlConfig"
  rows={ApiTable.defineRows([
    {
      name: "id",
      type: "string",
      description: "Unique identifier used for filtering and reporting.",
    },
    {
      name: "url",
      type: "string",
      description: "Absolute HTTP/HTTPS URL to test.",
    },
    {
      name: "title",
      type: "string",
      description: "Optional display name for reports.",
      href: "#title",
    },
    {
      name: "screenshotTarget",
      type: "string",
      description: "CSS selector of the element to capture (default: body).",
      href: "#screenshottarget",
    },
    {
      name: "elementsToMask",
      type: "string[]",
      description: "CSS selectors to mask before capture.",
    },
    {
      name: "viewport",
      type: "{ width: number; height: number; deviceScaleFactor?: number }",
      description: "Override global viewport for this URL.",
      href: "#viewport",
    },
    {
      name: "threshold",
      type: "number",
      description: "Override global comparison threshold for this URL.",
      href: "#threshold",
    },
    {
      name: "disableCSSInjection",
      type: "boolean",
      description: "Skip global CSS injection for this URL.",
      href: "#disablecssinjection",
    },
    {
      name: "interactions",
      type: "InteractionAction[]",
      description: "Actions to perform before capture.",
      href: "#interactions",
    },
  ])}
  anchorPrefix="url-config"
/>

## Advanced URL Options

Configure each URL with custom settings:

```typescript
urls: [
  {
    id: "homepage",
    url: "http://localhost:3000/",
    title: "Homepage", // display name
    viewport: { width: 1200, height: 800 },
    threshold: 0.05,
    disableCSSInjection: true, // prevent global CSS injection for this test
    screenshotTarget: "body",
    elementsToMask: [".sticky-header", "#ad-slot"],
    interactions: [
      { type: "click", selector: "button.cta" },
      { type: "waitForTimeout", duration: 500 },
    ],
  },
];
```

## URL-Specific Settings

### `title`

Display name for the URL in reports:

```typescript
{ id: "homepage", url: "http://localhost:3000/", title: "Homepage" }
```

### `viewport`

Custom viewport for this URL:

```typescript
{
  id: "mobile-homepage",
  url: "http://localhost:3000/",
  viewport: { width: 375, height: 667 }
}
```

### `threshold`

Custom threshold for this URL:

```typescript
{
  id: "precise-page",
  url: "http://localhost:3000/precise",
  threshold: 0.01 // 1% threshold
}
```

### `screenshotTarget`

Specify which element to screenshot:

```typescript
{
  id: "hero-section",
  url: "http://localhost:3000/",
  screenshotTarget: ".hero"
}
```

### `interactions`

Execute interactions before taking the screenshot:

```typescript
{
  id: "interactive-form",
  url: "http://localhost:3000/form",
  interactions: [
    { type: "fill", selector: "input[name='email']", text: "test@example.com" },
    { type: "click", selector: "button[type='submit']" },
    { type: "waitForTimeout", duration: 1000 }
  ]
}
```

### `disableCSSInjection`

Disable the global CSS injection (configured in your browser adapter) for this specific URL test case:

```typescript
{
  id: "no-css-injection",
  url: "http://localhost:3000/",
  disableCSSInjection: true
}
```

## Pattern Filtering

Use include/exclude to select URLs by id using minimatch patterns.

## Common Use Cases

### Marketing Website

Test your marketing site across different pages:

```typescript
urls: [
  { id: "homepage", url: "https://mycompany.com/" },
  { id: "features", url: "https://mycompany.com/features" },
  { id: "pricing", url: "https://mycompany.com/pricing" },
  { id: "contact", url: "https://mycompany.com/contact" },
];
```

### Application Testing

Test different parts of your application:

```typescript
urls: [
  { id: "login", url: "http://localhost:3000/login" },
  { id: "dashboard", url: "http://localhost:3000/dashboard" },
  { id: "settings", url: "http://localhost:3000/settings" },
];
```

### Mobile-First Testing

Test mobile-specific views:

```typescript
urls: [
  {
    id: "mobile-homepage",
    url: "http://localhost:3000/",
    viewport: { width: 375, height: 667 },
    title: "Homepage (Mobile)",
  },
  {
    id: "mobile-menu",
    url: "http://localhost:3000/",
    viewport: { width: 375, height: 667 },
    interactions: [{ type: "click", selector: ".menu-toggle" }],
  },
];
```

### Interactive Pages

Test pages with user interactions:

```typescript
urls: [
  {
    id: "search-results",
    url: "http://localhost:3000/search",
    interactions: [
      { type: "fill", selector: "input[type='search']", text: "test query" },
      { type: "click", selector: "button[type='submit']" },
      { type: "waitForSelector", selector: ".search-results" },
    ],
  },
];
```

## Mixed Testing

Combine URL testing with Storybook testing:

```typescript
testCase: [
  {
    name: "@visnap/storybook-adapter",
    options: {
      source: "./storybook-static",
      include: "*",
    },
  },
  {
    name: "@visnap/url-adapter",
    options: {
      urls: [
        { id: "homepage", url: "http://localhost:3000/" },
        { id: "about", url: "http://localhost:3000/about" },
      ],
    },
  },
];
```

## When to Use URL Adapter

Use the URL adapter when you need to test:

- **Marketing websites** - Landing pages, product pages
- **Applications without Storybook** - Legacy apps, non-React apps
- **External websites** - Third-party integrations
- **Full page flows** - Multi-step processes
- **Server-rendered pages** - SSR applications

For component testing, use the [Storybook Adapter](/docs/03-adapters/storybook-adapter) instead.

## Troubleshooting

### URL Not Loading

If URLs aren't loading, verify they're accessible:

```bash
curl http://localhost:3000/
```

### Timeout Issues

If pages are timing out, you can increase the navigation timeout in your browser adapter:

```typescript
navigation: {
  timeoutMs: 60000; // 60 seconds
}
```

### Screenshot Issues

If screenshots aren't capturing correctly, verify your screenshot target exists on the page:

```typescript
screenshotTarget: "body"; // ensure this element exists
```

### Authentication

For pages requiring authentication, you can configure the browser adapter to use a saved login state:

```typescript
// In your browser adapter config
context: {
  storageStatePath: "./auth.json"; // saved login state
}
```
