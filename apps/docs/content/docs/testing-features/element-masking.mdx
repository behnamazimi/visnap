---
title: Element Masking
description: What/why, configuration, use cases
---

Element masking helps you create more stable visual tests by overlaying elements that change frequently, reducing flakiness from dynamic content.

## What is element masking?

Element masking involves covering or overlaying specific parts of your UI with solid colors or patterns before taking screenshots. This prevents dynamic content like timestamps, user-specific data, or loading states from causing false test failures, ensuring your tests focus on the visual design rather than content that varies naturally over time.

## Configuration

Element masking is configured using the `elementsToMask` property in your test case configuration. This property accepts an array of CSS selectors that will be overlaid with a solid color before screenshots are taken.

```typescript
// In your visnap.config.ts
{
  adapters: {
    testCase: [
      {
        name: "@visnap/url-adapter",
        options: {
          urls: [
            {
              id: "homepage",
              url: "https://example.com",
              elementsToMask: [".sticky-header", "#ad-slot", ".timestamp"]
            }
          ]
        }
      }
    ]
  }
}
```

The masked elements will be overlaid with an orange color (`#ffA500`) by default, making them visually consistent across test runs.

Alternatively, you can achieve element masking using [CSS injection](/docs/testing-features/css-injection) if you prefer more control over the masking implementation.

## Use cases

Common scenarios where masking is helpful include hiding timestamps, user avatars, random content, loading spinners, or any element that changes between test runs but isn't part of your core visual design.
