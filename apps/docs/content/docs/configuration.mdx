---
title: Configuration
description: Complete guide to configuring ViviDiff for your project
---

ViviDiff uses a `vividiff.config.ts` file in your project root. This file defines how tests run, which browsers to use, and where to save screenshots.

## Basic Structure

```typescript
import { type VisualTestingToolConfig } from '@vividiff/protocol';

const config: VisualTestingToolConfig = {
  adapters: {
    browser: { /* browser configuration */ },
    testCase: [ /* test case adapters */ ]
  },
  threshold: 0.1,
  screenshotDir: "vividiff",
  // ... other options
};

export default config;
```

## Adapters

### Browser Adapter

Controls which browser engine to use for taking screenshots.

```typescript
adapters: {
  browser: {
    name: "@vividiff/playwright-adapter",
    options: {
      browser: 'chromium', // or 'firefox', 'webkit', or array of browsers
      launch: { headless: true },
      injectCSS: `* { animation: none !important; }`
    }
  }
}
```

### Test Case Adapters

Define where your test cases come from.

**Storybook Adapter:**
```typescript
testCase: [{
  name: "@vividiff/storybook-adapter",
  options: {
    source: "./storybook-static", // or URL to remote Storybook
    port: 6006,
    include: "*", // minimatch pattern
    exclude: "*-skip*"
  }
}]
```

**URL Adapter:**
```typescript
testCase: [{
  name: "@vividiff/url-adapter",
  options: {
    urls: [
      { id: "homepage", url: "http://localhost:3000/" },
      { id: "about", url: "http://localhost:3000/about" }
    ],
    include: "*",
    exclude: "*admin*"
  }
}]
```

## Core Settings

### Threshold

How different pixels need to be to count as a change (0.0 to 1.0).

```typescript
threshold: 0.1 // 10% difference threshold
```

### Screenshot Directory

Where to save screenshots and reports.

```typescript
screenshotDir: "vividiff" // default
```

### Viewports

Test across different screen sizes.

```typescript
viewport: {
  desktop: { width: 1920, height: 1080 },
  tablet: { width: 768, height: 1024 },
  mobile: { width: 375, height: 667 }
}
```

### Runtime Options

Control how tests execute.

```typescript
runtime: {
  maxConcurrency: 4, // parallel test limit
  quiet: false // suppress output
}
```

### Comparison Engine

Choose how images are compared.

```typescript
comparison: {
  core: "odiff", // or "pixelmatch"
  threshold: 0.1,
  diffColor: "#00ff00"
}
```

### Reporting

Generate test reports.

```typescript
report: {
  html: true,  // interactive HTML report
  json: true   // machine-readable JSON report
}
```

## Environment Variables

Override defaults without changing config:

```bash
VIVIDIFF_SCREENSHOT_DIR=./screenshots
VIVIDIFF_THRESHOLD=0.05
VIVIDIFF_MAX_CONCURRENCY=8
```

## Complete Example

Here's a full configuration that works with Storybook:

```typescript
import { type VisualTestingToolConfig } from '@vividiff/protocol';

const config: VisualTestingToolConfig = {
  adapters: {
    browser: {
      name: "@vividiff/playwright-adapter",
      options: {
        browser: ["chromium", "firefox"],
        launch: { headless: true },
        injectCSS: `
          * { 
            animation: none !important; 
            transition: none !important; 
          }
        `
      }
    },
    testCase: [{
      name: "@vividiff/storybook-adapter",
      options: {
        source: "./storybook-static",
        port: 6006,
        include: "*",
        exclude: "*-skip*"
      }
    }]
  },
  threshold: 0.1,
  screenshotDir: "vividiff",
  viewport: {
    desktop: { width: 1920, height: 1080 },
    mobile: { width: 375, height: 667 }
  },
  runtime: {
    maxConcurrency: 4
  },
  comparison: {
    core: "odiff",
    threshold: 0.1
  },
  report: {
    html: true,
    json: true
  }
};

export default config;
```

## Configuration Validation

Check your config is valid:

```bash
npx vividiff validate
```

This will catch common configuration errors before running tests.
