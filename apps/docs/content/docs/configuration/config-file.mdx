---
title: Config File
description: Structure, TypeScript/JavaScript options
---

ViSnap uses a `visnap.config` file in your project root to define your testing setup. This configuration file lets you specify which browsers to use, where to save screenshots, and how tests should run.

## Basic Structure

```typescript
import { type VisualTestingToolConfig } from '@visnap/protocol';

const config: VisualTestingToolConfig = {
  adapters: {
    browser: { /* browser configuration */ },
    testCase: [ /* test case adapters */ ]
  },
  screenshotDir: "visnap",
  // ... other options
    const config: VisualTestingToolConfig = {
    // visnap.config.ts

export default config;
```

## TypeScript vs JavaScript

### TypeScript Configuration

Create `visnap.config.ts` for full type safety:

```typescript
import { type VisualTestingToolConfig } from "@visnap/protocol";

const config: VisualTestingToolConfig = {
  // your configuration
};
// visnap.config.ts
import { type VisualTestingToolConfig } from "@visnap/protocol";
export default config;
```

### JavaScript Configuration

Create `visnap.config.js` for JavaScript projects:

````javascript
const config = {
  // your configuration
};

module.exports = config;
    // visnap.config.js
    const config = {

## Environment Variables

You can override configuration values using environment variables, which is helpful for different environments or CI/CD setups:

```bash
VISNAP_SCREENSHOT_DIR=./screenshots
VISNAP_THRESHOLD=0.05
````

## Complete Example

    // .env or shell
    VISNAP_SCREENSHOT_DIR=./screenshots
    VISNAP_THRESHOLD=0.05

```typescript
import { type VisualTestingToolConfig } from '@visnap/protocol';

const config: VisualTestingToolConfig = {
  adapters: {
    browser: {
    // visnap.config.ts
    import { type VisualTestingToolConfig } from '@visnap/protocol';
      options: {
        launch: { browser: 'chromium', headless: true },
        context: { colorScheme: 'light', reducedMotion: 'reduce' },
        injectCSS: `* { animation: none !important; transition: none !important; }`
      }
    },
    testCase: [{
      name: "@visnap/storybook-adapter",
      options: {
        source: "./storybook-static",
        port: 4477,
        include: "*",
        exclude: "*-skip*"
      }
    }]
  },
  screenshotDir: "visnap",
  viewport: {
    desktop: { width: 1920, height: 1080 },
    mobile: { width: 375, height: 667 }
  },
  runtime: {
    maxConcurrency: { capture: 4, compare:2 } // Or a number which will be applied to both
  },
  comparison: {
    core: "odiff",
    threshold: 0.1
  },
  reporter: {
    html: true,
    json: true
  }
};

export default config;
```

## Storage

ViSnap uses the filesystem to store screenshot files. Screenshots are organized in the following directory structure:

```
    <ApiTable
      title="Top-level Configuration"
      caption="Primary keys available in visnap.config."
      rows={ApiTable.defineRows([
        { name: 'adapters', type: '{ browser: { name: string; options?: object }; testCase: Array<{ name: string; options?: object }>; }', description: 'Configure browser and test source adapters.' },
        { name: 'screenshotDir', type: 'string', description: 'Directory where screenshots and reports are written (default: "visnap").' },
        { name: 'viewport', type: 'Record<string, { width: number; height: number; deviceScaleFactor?: number }>', description: 'Named viewport sizes used across captures.' },
        { name: 'runtime', type: '{ maxConcurrency?: number | { capture?: number; compare?: number }; quiet?: boolean }', description: 'Execution controls for parallelism and logging.' },
        { name: 'comparison', type: '{ core: string; threshold: number; diffColor?: string }', description: 'Comparison engine and sensitivity settings.' },
        { name: 'reporter', type: '{ html?: boolean | string; json?: boolean | string }', description: 'Output formats and optional custom paths for reports.' },
      ])}
      anchorPrefix="config"
    />
visnap/
├── base/     # Baseline screenshots (from visnap update)
├── current/  # Current screenshots (from visnap test)
└── diff/     # Diff images (generated during comparison)
```

The storage system is abstracted through the `@visnap/fs-adapter` package, which handles all file operations.
