---
title: Config File
description: Structure, TypeScript/JavaScript options
---

ViSnap uses a `visnap.config` file in your project root to define your testing setup. This configuration file lets you specify which browsers to use, where to save screenshots, and how tests should run.

## Basic Structure

```typescript
import { type VisualTestingToolConfig } from '@visnap/protocol';

const config: VisualTestingToolConfig = {
  adapters: {
    browser: { /* browser configuration */ },
    testCase: [ /* test case adapters */ ]
  },
  screenshotDir: "visnap",
  // ... other options
};

export default config;
```

## TypeScript vs JavaScript

### TypeScript Configuration

Create `visnap.config.ts` for full type safety:

```typescript
import { type VisualTestingToolConfig } from '@visnap/protocol';

const config: VisualTestingToolConfig = {
  // your configuration
};

export default config;
```

### JavaScript Configuration

Create `visnap.config.js` for JavaScript projects:

```javascript
const config = {
  // your configuration
};

module.exports = config;
```

## Environment Variables

You can override configuration values using environment variables, which is helpful for different environments or CI/CD setups:

```bash
VISNAP_SCREENSHOT_DIR=./screenshots
VISNAP_THRESHOLD=0.05
```

## Complete Example

Here's a full configuration that works with Storybook v8+ and Playwright:

```typescript
import { type VisualTestingToolConfig } from '@visnap/protocol';

const config: VisualTestingToolConfig = {
  adapters: {
    browser: {
      name: "@visnap/playwright-adapter",
      options: {
        launch: { browser: 'chromium', headless: true },
        context: { colorScheme: 'light', reducedMotion: 'reduce' },
        injectCSS: `* { animation: none !important; transition: none !important; }`
      }
    },
    testCase: [{
      name: "@visnap/storybook-adapter",
      options: {
        source: "./storybook-static",
        port: 4477,
        include: "*",
        exclude: "*-skip*"
      }
    }]
  },
  screenshotDir: "visnap",
  viewport: {
    desktop: { width: 1920, height: 1080 },
    mobile: { width: 375, height: 667 }
  },
  runtime: {
    maxConcurrency: { capture: 4, compare:2 } // Or a number which will be applied to both
  },
  comparison: {
    core: "odiff",
    threshold: 0.1
  },
  reporter: {
    html: true,
    json: true
  }
};

export default config;
```

## Storage

ViSnap uses the filesystem to store screenshot files. Screenshots are organized in the following directory structure:

```
visnap/
├── base/     # Baseline screenshots (from visnap update)
├── current/  # Current screenshots (from visnap test)
└── diff/     # Diff images (generated during comparison)
```

The storage system is abstracted through the `@visnap/fs-adapter` package, which handles all file operations.
